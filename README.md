**sOMP**

sOMP is a simulator for task-based applications running on shared-memory architectures.
This tool provides various models to refine the simulations precision (explicited in Usage section), and relies on a post-mortem trace of the target application and a XML file modelling the architecture of the target machine. Some examples of traces and platforms description files are provided in the "examples" directory.

Traces can be generated by the [TiKKi](https://gitlab.inria.fr/openmp/tikki/-/wikis/home) tool or with the StarPU runtime. For architecture modeling, some Python3.8 scripts are available in the examples/platforms/generator/ directory. Please use the "new_generator.py" script for now. You will still need to add some informations by hand.

**Compilation**:

*  add corresponding paths for SimGrid and TinyXML2 in the Makefile
*  make

**Usage**:

*  Export sOMP necessary environnement varaibles by modifying and then "sourcing" the sOMP_env_variables file
*  Run the simulator ./somp path/to/platform/file.xml path/to/trace/file.rec [options]
*  ALL options are mandatory:
    *  -m : Matrix size (m*m matrix)
    *  -b : Bloc/tile size (b*b tile)
    *  -t : Number of threads/cores
    *  -o : Model options:
        *  nomodel      : no model is used by the simulator
        *  task         : task times based model
        *  comm         : communications based model
        *  commcache    : communications and L3 cache modelisation based model
    *  -a : Affinity (placement policy):
        *  close 
        *  spread

**Example**:

source sOMP_env_variables

./somp examples/platforms/amd_epyc_7452.xml examples/traces/cholesky_16384_512.rec -m 16384 -b 512 -t 36 -o commcache -a close
